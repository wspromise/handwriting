<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>防抖和节流</title>
</head>

<body>
  <script>
    // 防抖
    function debounce (fn, delay = 500) {
      let timer = null;
      return function () {
        clearTimeout(timer);
        timer = setTimeout(() => {
          fn.apply(this, arguments);
        }, delay);
      };
    }

    // 节流
    function throttle (fn, delay = 500) {
      let prevTime = 0;
      return function () {
        let nowTime = Date.now();
        if (nowTime - prevTime < delay) return;
        fn.apply(this, arguments);
        prevTime = nowTime;
      };
    }

    // 节流2
    // function throttle (fn, delay = 500) {
    //   let timer = null
    //   return function () {
    //     if (timer) return
    //     timer = setTimeout(() => {
    //       fn.apply(this, arguments)
    //       timer = null
    //     }, delay);
    //   }
    // }

    document.addEventListener(
      'click',
      debounce(function (e) {
        console.log(this, e);
      }, 1000)
    );
  </script>
</body>

</html>